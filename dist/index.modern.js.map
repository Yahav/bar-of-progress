{"version":3,"file":"index.modern.js","sources":["../src/index.ts"],"sourcesContent":["interface ProgressBarConfig {\r\n  /**\r\n   * The size (height) of the progress bar.\r\n   * Numeric values get converted to px. */\r\n  size: number | string;\r\n  /**\r\n   * Color of the progress bar. Also used for the glow\r\n   * around the bar. */\r\n  color: string;\r\n  /**\r\n   * Class name used for the progress bar element. */\r\n  className: string;\r\n\r\n  /**\r\n   * Class name used for the progress bar element. */\r\n  container: string //the container in which to put the bar;\r\n\r\n  /**\r\n   * How many milliseconds to wait before the progress bar\r\n   * animation starts after calling .start(). */\r\n  delay: number;\r\n}\r\n\r\nexport default class ProgressBar {\r\n  /** Show the progress bar and begin animating it. */\r\n  start: () => void;\r\n\r\n  /** End the progress bar animation. */\r\n  finish: () => void;\r\n\r\n  constructor(options?: Partial<ProgressBarConfig>) {\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    const assign = (to: any, from: any): void => {\r\n      Object.keys(from).forEach((key) => {\r\n        to[key] = from[key];\r\n      });\r\n    };\r\n\r\n    const config: ProgressBarConfig = {\r\n      size: 2,\r\n      color: \"#29e\",\r\n      className: \"bar-of-progress\",\r\n      delay: 80,\r\n      container: 'body',\r\n    };\r\n    if (options) {\r\n      assign(config, options);\r\n    }\r\n\r\n    const initialStyle = {\r\n      position: \"fixed\",\r\n      top: 0,\r\n      left: 0,\r\n      margin: 0,\r\n      padding: 0,\r\n      border: \"none\",\r\n      borderRadius: 0,\r\n      backgroundColor: \"currentColor\",\r\n      zIndex: 10000,\r\n      height:\r\n        typeof config.size === \"number\" ? config.size + \"px\" : config.size,\r\n      color: config.color,\r\n      opacity: 0,\r\n      width: \"0%\",\r\n    };\r\n\r\n    const startedStyle = {\r\n      opacity: 1,\r\n      width: \"99%\",\r\n      transition: \"width 10s cubic-bezier(0.1, 0.05, 0, 1)\",\r\n    };\r\n\r\n    const finishedStyle = {\r\n      opacity: 0,\r\n      width: \"100%\",\r\n      transition: \"width 0.1s ease-out, opacity 0.5s ease 0.2s\",\r\n    };\r\n\r\n    const glowStyle = {\r\n      opacity: 0.4,\r\n      boxShadow: \"3px 0 8px\",\r\n      height: \"100%\",\r\n    };\r\n\r\n    let timeout: number | undefined | null;\r\n    let current!: HTMLElement;\r\n\r\n    this.start = () => {\r\n      if (document.querySelector(config.container) === null) return;\r\n      if (current && current.parentNode) {\r\n        current.parentNode.removeChild(current);\r\n      }\r\n      // @ts-ignore\r\n      current = document.querySelector(config.container).appendChild(document.createElement(\"div\"));\r\n      current.className = config.className + \" stopped\";\r\n      assign(current.style, initialStyle);\r\n\r\n      const glow = current.appendChild(document.createElement(\"div\"));\r\n      glow.className = \"glow\";\r\n      assign(glow.style, glowStyle);\r\n\r\n      if (timeout != null) {\r\n        clearTimeout(timeout);\r\n      }\r\n      timeout = setTimeout(() => {\r\n        timeout = null;\r\n        current.className = config.className + \" started\";\r\n        assign(current.style, startedStyle);\r\n      }, config.delay);\r\n\r\n      // Force a reflow, just to be sure that the initial style takes effect.\r\n      current.scrollTop = 0;\r\n    };\r\n\r\n    this.finish = () => {\r\n      if (timeout != null) {\r\n        clearTimeout(timeout);\r\n        timeout = null;\r\n      }\r\n      if (current) {\r\n        current.className = config.className + \" finished\";\r\n        assign(current.style, finishedStyle);\r\n      }\r\n    };\r\n  }\r\n}\r\n"],"names":["ProgressBar","constructor","options","start","finish","assign","to","from","Object","keys","forEach","key","config","size","color","className","delay","container","initialStyle","position","top","left","margin","padding","border","borderRadius","backgroundColor","zIndex","height","opacity","width","startedStyle","transition","finishedStyle","glowStyle","boxShadow","timeout","current","this","document","querySelector","parentNode","removeChild","appendChild","createElement","style","glow","clearTimeout","setTimeout","scrollTop"],"mappings":"MAuBqBA,EAOnBC,YAAYC,QALZC,kBAGAC,cAIE,MAAMC,EAAS,CAACC,EAASC,KACvBC,OAAOC,KAAKF,GAAMG,QAASC,IACzBL,EAAGK,GAAOJ,EAAKI,MAIbC,EAA4B,CAChCC,KAAM,EACNC,MAAO,OACPC,UAAW,kBACXC,MAAO,GACPC,UAAW,QAETf,GACFG,EAAOO,EAAQV,GAGjB,MAAMgB,EAAe,CACnBC,SAAU,QACVC,IAAK,EACLC,KAAM,EACNC,OAAQ,EACRC,QAAS,EACTC,OAAQ,OACRC,aAAc,EACdC,gBAAiB,eACjBC,OAAQ,IACRC,OACyB,iBAAhBhB,EAAOC,KAAoBD,EAAOC,KAAO,KAAOD,EAAOC,KAChEC,MAAOF,EAAOE,MACde,QAAS,EACTC,MAAO,MAGHC,EAAe,CACnBF,QAAS,EACTC,MAAO,MACPE,WAAY,2CAGRC,EAAgB,CACpBJ,QAAS,EACTC,MAAO,OACPE,WAAY,+CAGRE,EAAY,CAChBL,QAAS,GACTM,UAAW,YACXP,OAAQ,QAGV,IAAIQ,EACAC,EAEJC,KAAKnC,MAAQ,KACX,GAAiD,OAA7CoC,SAASC,cAAc5B,EAAOK,WAAqB,OACnDoB,GAAWA,EAAQI,YACrBJ,EAAQI,WAAWC,YAAYL,GAGjCA,EAAUE,SAASC,cAAc5B,EAAOK,WAAW0B,YAAYJ,SAASK,cAAc,QACtFP,EAAQtB,UAAYH,EAAOG,UAAY,WACvCV,EAAOgC,EAAQQ,MAAO3B,GAEtB,MAAM4B,EAAOT,EAAQM,YAAYJ,SAASK,cAAc,QACxDE,EAAK/B,UAAY,OACjBV,EAAOyC,EAAKD,MAAOX,GAEJ,MAAXE,GACFW,aAAaX,GAEfA,EAAUY,WAAW,KACnBZ,EAAU,KACVC,EAAQtB,UAAYH,EAAOG,UAAY,WACvCV,EAAOgC,EAAQQ,MAAOd,IACrBnB,EAAOI,OAGVqB,EAAQY,UAAY,GAGtBX,KAAKlC,OAAS,KACG,MAAXgC,IACFW,aAAaX,GACbA,EAAU,MAERC,IACFA,EAAQtB,UAAYH,EAAOG,UAAY,YACvCV,EAAOgC,EAAQQ,MAAOZ"}